# CMakeLists.txt

SET (OPTIONAL_LIBRARIES "")

SET (XHTMLDBG_BINARY_PROJECT_INCULDE
  ${CMAKE_CURRENT_BINARY_DIR}
  ${CMAKE_CURRENT_SOURCE_DIR}
  ${XHTMLDBG_INCLUDE_INTERFACE}
  ${CMAKE_CURRENT_BINARY_DIR}/about
  ${CMAKE_CURRENT_SOURCE_DIR}/about
  ${CMAKE_CURRENT_SOURCE_DIR}/autosaver
  ${CMAKE_CURRENT_SOURCE_DIR}/bookmark
  ${CMAKE_CURRENT_SOURCE_DIR}/colorpicker
  ${CMAKE_CURRENT_SOURCE_DIR}/cookiesdatabase
  ${CMAKE_CURRENT_SOURCE_DIR}/docking
  ${CMAKE_CURRENT_SOURCE_DIR}/hostinfo
  ${CMAKE_CURRENT_SOURCE_DIR}/openurldialog
  ${CMAKE_CURRENT_SOURCE_DIR}/settargetdialog
  ${CMAKE_CURRENT_SOURCE_DIR}/sourceviewer
  ${CMAKE_CURRENT_SOURCE_DIR}/settings
  ${CMAKE_CURRENT_SOURCE_DIR}/cssvalidator
  ${CMAKE_CURRENT_SOURCE_DIR}/configuration
  ${CMAKE_CURRENT_SOURCE_DIR}/dominspector
  ${CMAKE_CURRENT_SOURCE_DIR}/networker
  ${CMAKE_CURRENT_SOURCE_DIR}/downloadmanager
  ${CMAKE_CURRENT_SOURCE_DIR}/rdfparser
  ${XHTMLDBG_INCLUDES}
)

ADD_SUBDIRECTORY (about)
ADD_SUBDIRECTORY (autosaver)
ADD_SUBDIRECTORY (bookmark)
ADD_SUBDIRECTORY (colorpicker)
ADD_SUBDIRECTORY (cookiesdatabase)
ADD_SUBDIRECTORY (docking)
ADD_SUBDIRECTORY (hostinfo)
ADD_SUBDIRECTORY (interface)
ADD_SUBDIRECTORY (openurldialog)
ADD_SUBDIRECTORY (settargetdialog)
ADD_SUBDIRECTORY (sourceviewer)
ADD_SUBDIRECTORY (settings)
## to predicate on certain conditions
ADD_SUBDIRECTORY (cssvalidator)
ADD_SUBDIRECTORY (configuration)
ADD_SUBDIRECTORY (dominspector)
ADD_SUBDIRECTORY (networker)
ADD_SUBDIRECTORY (downloadmanager)
ADD_SUBDIRECTORY (rdfparser)
## Extensions and Plugins
ADD_SUBDIRECTORY (plugins)
ADD_SUBDIRECTORY (components)

SET (xhtmldbg_SOURCES
  main.cpp
  xhtmldbgmain.cpp
  application.cpp
  window.cpp
  addresstoolbar.cpp
  keywordstoolbar.cpp
  tidymessanger.cpp
  jsmessanger.cpp
  webviewer.cpp
  viewer.cpp
  page.cpp
  historymanager.cpp
  historyitem.cpp
  historymenu.cpp
  statusbar.cpp
  cookieacceptdialog.cpp
  appevents.cpp
  autoreloader.cpp
  autoreloadmenu.cpp
  useragentmenu.cpp
  xhtmldbgadaptor.cpp
  zoombar.cpp
  geolocation.cpp
)

SET (xhtmldbg_HEADERS
  xhtmldbgmain.h
  application.h
  window.h
  addresstoolbar.h
  keywordstoolbar.h
  tidymessanger.h
  jsmessanger.h
  webviewer.h
  viewer.h
  page.h
  historymanager.h
  historymenu.h
  statusbar.h
  cookieacceptdialog.h
  appevents.h
  autoreloader.h
  autoreloadmenu.h
  useragentmenu.h
  xhtmldbgadaptor.h
  zoombar.h
  geolocation.h
)

SET (xhtmldbg_NOMOC
  historyitem.h
)

## x-qt-plugin Support
IF (QT_QTUITOOLS_FOUND)
  SET (OPTIONAL_LIBRARIES ${OPTIONAL_LIBRARIES}
    ${QT_QTSCRIPT_LIBRARY}
    ${QT_QTUITOOLS_LIBRARY}
  )
  SET (xhtmldbg_SOURCES ${xhtmldbg_SOURCES}
    uitoolsloader.cpp
  )
  SET (xhtmldbg_HEADERS ${xhtmldbg_HEADERS}
    uitoolsloader.h
  )
ENDIF (QT_QTUITOOLS_FOUND)

QT4_WRAP_CPP (xhtmldbg_MOC ${xhtmldbg_HEADERS})

INCLUDE_DIRECTORIES (${XHTMLDBG_BINARY_PROJECT_INCULDE})

QT4_ADD_RESOURCES (xhtmldbg_RESRC xhtmldbg.qrc)

ADD_EXECUTABLE (xhtmldbg
  ${xhtmldbg_RESRC}
  ${xhtmldbg_MOC}
  ${xhtmldbg_NOMOC}
  ${xhtmldbg_UI}
  ${xhtmldbg_ADAPTOR}
  ${xhtmldbg_HEADERS}
  ${xhtmldbg_SOURCES}
)

TARGET_LINK_LIBRARIES (xhtmldbg
  About
  Bookmark
  ColorPicker
  CookiesDatabase
  Docking
  HostInfo
  xhtmldbginterface
  OpenUrlDialog
  SetTargetDialog
  SourceViewer
  Settings
  CSSValidator
  Configuration
  DomInspector
  Networker
  DownloadManager
  RDFParser
  ${OPTIONAL_LIBRARIES}
  ${XHTMLDBG_LIBRARIES}
)


SET_TARGET_PROPERTIES (xhtmldbg PROPERTIES
  OUTPUT_NAME xhtmldbg
  LINKER_LANGUAGE CXX
  COMPILE_FLAGS "${LIB_FPIC_CXXFLAGS} ${APP_PIE_CXXFLAGS}"
  LINK_FLAGS "${LIB_FPIC_CXXFLAGS} ${APP_PIE_LDFLAGS} ${TWEAKING_LDFLAGS}"
)

INSTALL (TARGETS xhtmldbg DESTINATION bin)

INSTALL (FILES xhtmldbg.desktop DESTINATION share/applications)

## EOF
