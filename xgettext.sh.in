#!/bin/sh

test -d i18n || exit 1

XGETTEXT_FLAGS_QT="-C --qt -ktr:1,1t -ktr:1,2c,2t -ktrUtf8:1,1t -kQT_TRANSLATE_NOOP:1c,2,2t -kQT_TR_NOOP:1,1t -ktranslate:1c,2,2t -ktranslate:2,3c,3t"
XGETTEXT_FLAGS="-C --kde -ci18n -ki18n:1 -ki18nc:1c,2 -ki18np:1,2 -ki18ncp:1c,2,3 -ktr2i18n:1 -kI18N_NOOP:1 -kI18N_NOOP2:1c,2 -kI18N_NOOP2_NOSTRIP:1c,2 -kaliasLocale -kki18n:1 -kki18nc:1c,2 -kki18np:1,2 -kki18ncp:1c,2,3"

frsource="`find src/ -mindepth 1 -type f -name "*.cpp"`"
frsource="$frsource `find build/src -mindepth 1 -type f -name "moc_*.cxx"`"

xgettext --package-name=xhtmldbg \
  --default-domain=xhtmldbg \
  --package-version="@XHTMLDBG_VERSION@" \
  --msgid-bugs-address="`git config author.email`" \
  --copyright-holder="GPLv3" \
  --from-code=UTF-8 $XGETTEXT_FLAGS_QT \
  $frsource --output-dir=i18n/ --output=xhtmldbg.pot
